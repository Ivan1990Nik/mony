{"ast":null,"code":"import React,{useState,useEffect,useRef}from'react';import'./App.css';// Для стилей, если нужно\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const[incomes,setIncomes]=useState([]);// Массив доступных доходов: [{ date: '2023-10-01', amount: 6720 }] (90% от округлённой суммы)\nconst[expenses,setExpenses]=useState([]);// Массив расходов: [{ name: 'Квартира', amount: 500, date: '2023-10-01' }]\nconst[savings,setSavings]=useState(0);// Общая сумма заначки\nconst[wallet,setWallet]=useState(0);// Общая сумма кошелька (остаток от округления)\nconst[calculation,setCalculation]=useState(null);// Результат расчета\nconst[totalRemaining,setTotalRemaining]=useState(0);// Остаток доступных доходов после покрытия расходов\nconst[history,setHistory]=useState([]);// История операций: теперь массив объектов [{ timestamp: '2023-10-01T12:00:00.000Z', description: '...' }]\nconst[showHistory,setShowHistory]=useState(false);// Флаг для показа/скрытия истории\n// Состояния для формы доходов\nconst[incomeDate,setIncomeDate]=useState('');const[incomeAmount,setIncomeAmount]=useState('');// Состояния для формы расходов\nconst[expenseName,setExpenseName]=useState('');const[expenseAmount,setExpenseAmount]=useState('');const[expenseDate,setExpenseDate]=useState('');// Новое состояние для даты расхода\n// Состояние для использования из кошелька\nconst[useFromWallet,setUseFromWallet]=useState('');// Флаг для предотвращения двойной загрузки и преждевременного сохранения\nconst isLoaded=useRef(false);// Загрузка данных из localStorage при монтировании компонента (только один раз)\nuseEffect(()=>{if(!isLoaded.current){try{const savedIncomes=localStorage.getItem('incomes');if(savedIncomes){setIncomes(JSON.parse(savedIncomes));}const savedExpenses=localStorage.getItem('expenses');if(savedExpenses){setExpenses(JSON.parse(savedExpenses));}const savedSavings=localStorage.getItem('savings');if(savedSavings){setSavings(parseFloat(savedSavings)||0);}const savedWallet=localStorage.getItem('wallet');if(savedWallet){setWallet(parseFloat(savedWallet)||0);}const savedHistory=localStorage.getItem('history');if(savedHistory){setHistory(JSON.parse(savedHistory));}isLoaded.current=true;// Устанавливаем флаг после загрузки\n}catch(error){// Ошибка загрузки (можно добавить обработку, если нужно)\n}}},[]);// Сохранение incomes в localStorage при изменении (только после загрузки)\nuseEffect(()=>{if(isLoaded.current){try{localStorage.setItem('incomes',JSON.stringify(incomes));}catch(error){// Ошибка сохранения (можно добавить обработку, если нужно)\n}}},[incomes]);// Сохранение expenses в localStorage при изменении (только после загрузки)\nuseEffect(()=>{if(isLoaded.current){try{localStorage.setItem('expenses',JSON.stringify(expenses));}catch(error){// Ошибка сохранения (можно добавить обработку, если нужно)\n}}},[expenses]);// Сохранение savings в localStorage при изменении (только после загрузки)\nuseEffect(()=>{if(isLoaded.current){try{localStorage.setItem('savings',savings.toString());}catch(error){// Ошибка сохранения (можно добавить обработку, если нужно)\n}}},[savings]);// Сохранение wallet в localStorage при изменении (только после загрузки)\nuseEffect(()=>{if(isLoaded.current){try{localStorage.setItem('wallet',wallet.toString());}catch(error){// Ошибка сохранения (можно добавить обработку, если нужно)\n}}},[wallet]);// Сохранение history в localStorage при изменении (только после загрузки)\nuseEffect(()=>{if(isLoaded.current){try{localStorage.setItem('history',JSON.stringify(history));}catch(error){// Ошибка сохранения (можно добавить обработку, если нужно)\n}}},[history]);// Добавление дохода через форму (с округлением и распределением; фиксированный 10% в заначку)\nconst handleAddIncome=e=>{e.preventDefault();// Предотвращаем перезагрузку страницы\nconst amount=parseFloat(incomeAmount);if(incomeDate&&!isNaN(amount)&&amount>0){const rounded=Math.floor(amount/1000)*1000;// Округление вниз до 1000\nconst walletAmount=amount-rounded;// Остаток в кошелек\nconst savingsAmount=rounded*0.1;// Фиксированные 10% в заначку от округлённой суммы\nconst availableAmount=rounded-savingsAmount;// Остальное (90%) доступно для расходов\nsetSavings(prev=>prev+savingsAmount);setWallet(prev=>prev+walletAmount);setIncomes([...incomes,{date:incomeDate,amount:availableAmount}]);// Добавляем в историю с timestamp\nsetHistory([...history,{timestamp:new Date().toISOString(),description:\"\\u0414\\u043E\\u0431\\u0430\\u0432\\u043B\\u0435\\u043D \\u0434\\u043E\\u0445\\u043E\\u0434: \".concat(incomeDate,\", \").concat(availableAmount.toFixed(2),\" \\u0440\\u0443\\u0431. (\\u0437\\u0430\\u043D\\u0430\\u0447\\u043A\\u0430: +\").concat(savingsAmount.toFixed(2),\", \\u043A\\u043E\\u0448\\u0435\\u043B\\u0435\\u043A: +\").concat(walletAmount.toFixed(2),\")\")}]);setIncomeDate('');// Сбрасываем инпуты\nsetIncomeAmount('');}else{alert('Пожалуйста, введите корректную дату и сумму дохода.');}};// Добавление расхода через форму (теперь с датой)\nconst handleAddExpense=e=>{e.preventDefault();// Предотвращаем перезагрузку страницы\nconst amount=parseFloat(expenseAmount);if(expenseName&&expenseDate&&!isNaN(amount)&&amount>0){setExpenses([...expenses,{name:expenseName,amount,date:expenseDate}]);// Добавляем в историю с timestamp\nsetHistory([...history,{timestamp:new Date().toISOString(),description:\"\\u0414\\u043E\\u0431\\u0430\\u0432\\u043B\\u0435\\u043D \\u0440\\u0430\\u0441\\u0445\\u043E\\u0434: \".concat(expenseName,\", \").concat(amount.toFixed(2),\" \\u0440\\u0443\\u0431., \\u0434\\u0430\\u0442\\u0430: \").concat(expenseDate)}]);setExpenseName('');// Сбрасываем инпуты\nsetExpenseAmount('');setExpenseDate('');}else{alert('Пожалуйста, введите корректное название, дату и сумму расхода.');}};// Удаление дохода (удаляем только доступную сумму; заначка и кошелек остаются)\nconst handleDeleteIncome=index=>{const deleted=incomes[index];setIncomes(incomes.filter((_,i)=>i!==index));// Добавляем в историю с timestamp\nsetHistory([...history,{timestamp:new Date().toISOString(),description:\"\\u0423\\u0434\\u0430\\u043B\\u0451\\u043D \\u0434\\u043E\\u0445\\u043E\\u0434: \".concat(deleted.date,\", \").concat(deleted.amount.toFixed(2),\" \\u0440\\u0443\\u0431.\")}]);};// Удаление расхода\nconst handleDeleteExpense=index=>{const deleted=expenses[index];setExpenses(expenses.filter((_,i)=>i!==index));// Добавляем в историю с timestamp\nsetHistory([...history,{timestamp:new Date().toISOString(),description:\"\\u0423\\u0434\\u0430\\u043B\\u0451\\u043D \\u0440\\u0430\\u0441\\u0445\\u043E\\u0434: \".concat(deleted.name,\", \").concat(deleted.amount.toFixed(2),\" \\u0440\\u0443\\u0431., \\u0434\\u0430\\u0442\\u0430: \").concat(deleted.date)}]);};// Сброс заначки\nconst handleResetSavings=()=>{const previousSavings=savings;setSavings(0);// Добавляем в историю с timestamp\nsetHistory([...history,{timestamp:new Date().toISOString(),description:\"\\u0417\\u0430\\u043D\\u0430\\u0447\\u043A\\u0430 \\u0441\\u0431\\u0440\\u043E\\u0448\\u0435\\u043D\\u0430: \\u0431\\u044B\\u043B\\u043E \".concat(previousSavings.toFixed(2),\" \\u0440\\u0443\\u0431., \\u0442\\u0435\\u043F\\u0435\\u0440\\u044C 0 \\u0440\\u0443\\u0431.\")}]);};// Сброс кошелька\nconst handleResetWallet=()=>{const previousWallet=wallet;setWallet(0);// Добавляем в историю с timestamp\nsetHistory([...history,{timestamp:new Date().toISOString(),description:\"\\u041A\\u043E\\u0448\\u0435\\u043B\\u0451\\u043A \\u0441\\u0431\\u0440\\u043E\\u0448\\u0435\\u043D: \\u0431\\u044B\\u043B\\u043E \".concat(previousWallet.toFixed(2),\" \\u0440\\u0443\\u0431., \\u0442\\u0435\\u043F\\u0435\\u0440\\u044C 0 \\u0440\\u0443\\u0431.\")}]);};// Удаление записи из истории\nconst handleDeleteHistory=index=>{setHistory(history.filter((_,i)=>i!==index));};// Расчет: распределение расходов по доступным доходам (с возможным использованием кошелька; расходы сортируются по дате)\nconst calculate=()=>{const walletAmount=parseFloat(useFromWallet)||0;if(walletAmount>wallet||walletAmount<0){alert('Сумма из кошелька должна быть положительной и не превышать доступное в кошельке.');return;}let remainingIncomes=[...incomes].sort((a,b)=>new Date(a.date)-new Date(b.date));// Сортировка по дате\n// Добавляем сумму из кошелька как дополнительный \"доход\" (без даты, обрабатывается последним)\nif(walletAmount>0){remainingIncomes.push({date:'Из кошелька',amount:walletAmount});}let remainingExpenses=[...expenses].sort((a,b)=>new Date(a.date)-new Date(b.date));// Сортировка расходов по дате\nlet result=[];for(let expense of remainingExpenses){let expenseCovered=false;for(let income of remainingIncomes){if(income.amount>0){const coverAmount=Math.min(income.amount,expense.amount);result.push(\"\".concat(expense.name,\" (\").concat(expense.amount,\", \\u0434\\u0430\\u0442\\u0430: \").concat(expense.date,\") \\u043F\\u043E\\u043A\\u0440\\u044B\\u0442\\u043E \\u0434\\u043E\\u0445\\u043E\\u0434\\u043E\\u043C \\u043E\\u0442 \").concat(income.date,\" \\u043D\\u0430 \").concat(coverAmount));income.amount-=coverAmount;expense.amount-=coverAmount;if(expense.amount<=0){expenseCovered=true;break;}}}if(!expenseCovered&&expense.amount>0){result.push(\"\".concat(expense.name,\" (\\u0434\\u0430\\u0442\\u0430: \").concat(expense.date,\") \\u043D\\u0435 \\u043F\\u043E\\u043B\\u043D\\u043E\\u0441\\u0442\\u044C\\u044E \\u043F\\u043E\\u043A\\u0440\\u044B\\u0442\\u043E (\\u043E\\u0441\\u0442\\u0430\\u043B\\u043E\\u0441\\u044C \").concat(expense.amount,\")\"));}}// Рассчитываем остаток доступных доходов (исключая использованное из кошелька)\nconst totalRemainingAmount=remainingIncomes.filter(inc=>inc.date!=='Из кошелька')// Исключаем кошелек из остатка\n.reduce((sum,inc)=>sum+inc.amount,0);setTotalRemaining(totalRemainingAmount);setCalculation(result);// Вычитаем использованное из кошелька\nif(walletAmount>0){setWallet(prev=>prev-walletAmount);setUseFromWallet('');// Сбрасываем поле после использования\n}// Добавляем в историю с timestamp\nsetHistory([...history,{timestamp:new Date().toISOString(),description:\"\\u0412\\u044B\\u043F\\u043E\\u043B\\u043D\\u0435\\u043D \\u0440\\u0430\\u0441\\u0447\\u0451\\u0442: \\u0438\\u0441\\u043F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u043D \\u043A\\u043E\\u0448\\u0435\\u043B\\u0451\\u043A \".concat(walletAmount.toFixed(2),\" \\u0440\\u0443\\u0431., \\u043E\\u0441\\u0442\\u0430\\u0442\\u043E\\u043A \\u0434\\u043E\\u0445\\u043E\\u0434\\u043E\\u0432: \").concat(totalRemainingAmount.toFixed(2),\" \\u0440\\u0443\\u0431.\")}]);};return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\\u0411\\u044E\\u0434\\u0436\\u0435\\u0442\\u043D\\u043E\\u0435 \\u043F\\u0440\\u0438\\u043B\\u043E\\u0436\\u0435\\u043D\\u0438\\u0435\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u0417\\u0430\\u043D\\u0430\\u0447\\u043A\\u0430\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"\\u041E\\u0431\\u0449\\u0430\\u044F \\u0441\\u0443\\u043C\\u043C\\u0430: \",savings.toFixed(2),\" \\u0440\\u0443\\u0431.\"]}),/*#__PURE__*/_jsx(\"p\",{children:\"\\u041F\\u0440\\u0438\\u043C\\u0435\\u0447\\u0430\\u043D\\u0438\\u0435: \\u0424\\u0438\\u043A\\u0441\\u0438\\u0440\\u043E\\u0432\\u0430\\u043D\\u043D\\u044B\\u0435 10% \\u043E\\u0442 \\u043E\\u043A\\u0440\\u0443\\u0433\\u043B\\u0451\\u043D\\u043D\\u043E\\u0439 \\u0441\\u0443\\u043C\\u043C\\u044B \\u0434\\u043E\\u0445\\u043E\\u0434\\u0430 \\u0438\\u0434\\u0443\\u0442 \\u0432 \\u0437\\u0430\\u043D\\u0430\\u0447\\u043A\\u0443.\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleResetSavings,children:\"\\u0421\\u0431\\u0440\\u043E\\u0441\\u0438\\u0442\\u044C \\u0437\\u0430\\u043D\\u0430\\u0447\\u043A\\u0443\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u041A\\u043E\\u0448\\u0435\\u043B\\u0435\\u043A\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"\\u041E\\u0431\\u0449\\u0430\\u044F \\u0441\\u0443\\u043C\\u043C\\u0430: \",wallet.toFixed(2),\" \\u0440\\u0443\\u0431.\"]}),/*#__PURE__*/_jsx(\"p\",{children:\"\\u041F\\u0440\\u0438\\u043C\\u0435\\u0447\\u0430\\u043D\\u0438\\u0435: \\u0412\\u044B \\u043C\\u043E\\u0436\\u0435\\u0442\\u0435 \\u0432\\u0437\\u044F\\u0442\\u044C \\u0434\\u0435\\u043D\\u044C\\u0433\\u0438 \\u0438\\u0437 \\u043A\\u043E\\u0448\\u0435\\u043B\\u044C\\u043A\\u0430 \\u0434\\u043B\\u044F \\u043F\\u043E\\u043A\\u0440\\u044B\\u0442\\u0438\\u044F \\u0440\\u0430\\u0441\\u0445\\u043E\\u0434\\u043E\\u0432.\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleResetWallet,children:\"\\u0421\\u0431\\u0440\\u043E\\u0441\\u0438\\u0442\\u044C \\u043A\\u043E\\u0448\\u0435\\u043B\\u0435\\u043A\"}),wallet>0&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u0418\\u0441\\u043F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u044C \\u0438\\u0437 \\u043A\\u043E\\u0448\\u0435\\u043B\\u044C\\u043A\\u0430 \\u0434\\u043B\\u044F \\u0440\\u0430\\u0441\\u0445\\u043E\\u0434\\u043E\\u0432 (\\u0440\\u0443\\u0431.):\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:useFromWallet,onChange:e=>setUseFromWallet(e.target.value),placeholder:\"\\u0421\\u0443\\u043C\\u043C\\u0430\",min:\"0\",step:\"0.01\",max:wallet})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u0414\\u043E\\u0445\\u043E\\u0434\\u044B (\\u0434\\u043E\\u0441\\u0442\\u0443\\u043F\\u043D\\u044B\\u0435 \\u0434\\u043B\\u044F \\u0440\\u0430\\u0441\\u0445\\u043E\\u0434\\u043E\\u0432)\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleAddIncome,children:[/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:incomeDate,onChange:e=>setIncomeDate(e.target.value),placeholder:\"\\u0414\\u0430\\u0442\\u0430 \\u0434\\u043E\\u0445\\u043E\\u0434\\u0430\",required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:incomeAmount,onChange:e=>setIncomeAmount(e.target.value),placeholder:\"\\u0421\\u0443\\u043C\\u043C\\u0430 \\u0434\\u043E\\u0445\\u043E\\u0434\\u0430\",min:\"0.01\",step:\"0.01\",required:true}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u0434\\u043E\\u0445\\u043E\\u0434\"})]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"\\u041F\\u0440\\u0438\\u043C\\u0435\\u0447\\u0430\\u043D\\u0438\\u0435: \\u0421\\u0443\\u043C\\u043C\\u0430 \\u043E\\u043A\\u0440\\u0443\\u0433\\u043B\\u044F\\u0435\\u0442\\u0441\\u044F \\u0432\\u043D\\u0438\\u0437 \\u0434\\u043E \\u0431\\u043B\\u0438\\u0436\\u0430\\u0439\\u0448\\u0438\\u0445 1000 \\u0440\\u0443\\u0431. \",/*#__PURE__*/_jsx(\"br\",{}),\"10% \\u0443\\u0439\\u0434\\u0451\\u0442 \\u0432 \\u0437\\u0430\\u043D\\u0430\\u0447\\u043A\\u0443, \",/*#__PURE__*/_jsx(\"br\",{}),\"\\u043E\\u0441\\u0442\\u0430\\u0442\\u043E\\u043A \\u043E\\u0442 \\u043E\\u043A\\u0440\\u0443\\u0433\\u043B\\u0435\\u043D\\u0438\\u044F \\u2014 \\u0432 \\u043A\\u043E\\u0448\\u0435\\u043B\\u0435\\u043A, \",/*#__PURE__*/_jsx(\"br\",{}),\"\\u043E\\u0441\\u0442\\u0430\\u043B\\u044C\\u043D\\u043E\\u0435 (90%) \\u0434\\u043E\\u0441\\u0442\\u0443\\u043F\\u043D\\u043E \\u0434\\u043B\\u044F \\u0440\\u0430\\u0441\\u0445\\u043E\\u0434\\u043E\\u0432.\"]}),/*#__PURE__*/_jsx(\"ul\",{children:incomes.map((inc,idx)=>/*#__PURE__*/_jsxs(\"li\",{children:[inc.date,\": \",inc.amount.toFixed(2),\" \\u0440\\u0443\\u0431.\",/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDeleteIncome(idx),children:\"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C\"})]},idx))})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u0420\\u0430\\u0441\\u0445\\u043E\\u0434\\u044B\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleAddExpense,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:expenseName,onChange:e=>setExpenseName(e.target.value),placeholder:\"\\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435 \\u0440\\u0430\\u0441\\u0445\\u043E\\u0434\\u0430\",required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:expenseDate,onChange:e=>setExpenseDate(e.target.value),placeholder:\"\\u0414\\u0430\\u0442\\u0430 \\u0440\\u0430\\u0441\\u0445\\u043E\\u0434\\u0430\",required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:expenseAmount,onChange:e=>setExpenseAmount(e.target.value),placeholder:\"\\u0421\\u0443\\u043C\\u043C\\u0430 \\u0440\\u0430\\u0441\\u0445\\u043E\\u0434\\u0430\",min:\"0.01\",step:\"0.01\",required:true}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u0440\\u0430\\u0441\\u0445\\u043E\\u0434\"})]}),/*#__PURE__*/_jsx(\"ul\",{children:expenses.map((exp,idx)=>/*#__PURE__*/_jsxs(\"li\",{children:[exp.name,\" (\",exp.date,\"): \",exp.amount,\" \\u0440\\u0443\\u0431.\",/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDeleteExpense(idx),children:\"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C\"})]},idx))})]}),/*#__PURE__*/_jsx(\"button\",{onClick:calculate,children:\"\\u0420\\u0430\\u0441\\u0441\\u0447\\u0438\\u0442\\u0430\\u0442\\u044C\"}),\" \",calculation&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u0420\\u0435\\u0437\\u0443\\u043B\\u044C\\u0442\\u0430\\u0442\"}),/*#__PURE__*/_jsx(\"ul\",{children:calculation.map((item,idx)=>/*#__PURE__*/_jsx(\"li\",{children:item},idx))})]}),totalRemaining!==null&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u041E\\u0441\\u0442\\u0430\\u0442\\u043E\\u043A\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"\\u041F\\u043E\\u0441\\u043B\\u0435 \\u043F\\u043E\\u043A\\u0440\\u044B\\u0442\\u0438\\u044F \\u0440\\u0430\\u0441\\u0445\\u043E\\u0434\\u043E\\u0432: \",totalRemaining.toFixed(2),\" \\u0440\\u0443\\u0431.\"]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u0418\\u0441\\u0442\\u043E\\u0440\\u0438\\u044F \\u043E\\u043F\\u0435\\u0440\\u0430\\u0446\\u0438\\u0439\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowHistory(!showHistory),children:showHistory?'Скрыть историю':'Показать историю'}),showHistory&&/*#__PURE__*/_jsx(\"ul\",{children:history.length>0?history.map((entry,idx)=>/*#__PURE__*/_jsxs(\"li\",{children:[new Date(entry.timestamp).toLocaleString('ru-RU'),\" - \",entry.description,/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDeleteHistory(idx),children:\"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C\"})]},idx)):/*#__PURE__*/_jsx(\"li\",{children:\"\\u0418\\u0441\\u0442\\u043E\\u0440\\u0438\\u044F \\u043F\\u0443\\u0441\\u0442\\u0430.\"})})]})]});}export default App;","map":{"version":3,"names":["React","useState","useEffect","useRef","jsx","_jsx","jsxs","_jsxs","App","incomes","setIncomes","expenses","setExpenses","savings","setSavings","wallet","setWallet","calculation","setCalculation","totalRemaining","setTotalRemaining","history","setHistory","showHistory","setShowHistory","incomeDate","setIncomeDate","incomeAmount","setIncomeAmount","expenseName","setExpenseName","expenseAmount","setExpenseAmount","expenseDate","setExpenseDate","useFromWallet","setUseFromWallet","isLoaded","current","savedIncomes","localStorage","getItem","JSON","parse","savedExpenses","savedSavings","parseFloat","savedWallet","savedHistory","error","setItem","stringify","toString","handleAddIncome","e","preventDefault","amount","isNaN","rounded","Math","floor","walletAmount","savingsAmount","availableAmount","prev","date","timestamp","Date","toISOString","description","concat","toFixed","alert","handleAddExpense","name","handleDeleteIncome","index","deleted","filter","_","i","handleDeleteExpense","handleResetSavings","previousSavings","handleResetWallet","previousWallet","handleDeleteHistory","calculate","remainingIncomes","sort","a","b","push","remainingExpenses","result","expense","expenseCovered","income","coverAmount","min","totalRemainingAmount","inc","reduce","sum","className","children","onClick","type","value","onChange","target","placeholder","step","max","onSubmit","required","map","idx","exp","item","length","entry","toLocaleString"],"sources":["C:/Users/ponal/OneDrive/Desktop/program/my-budget-app/src/App.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport './App.css'; // Для стилей, если нужно\n\nfunction App() {\n  const [incomes, setIncomes] = useState([]); // Массив доступных доходов: [{ date: '2023-10-01', amount: 6720 }] (90% от округлённой суммы)\n  const [expenses, setExpenses] = useState([]); // Массив расходов: [{ name: 'Квартира', amount: 500, date: '2023-10-01' }]\n  const [savings, setSavings] = useState(0); // Общая сумма заначки\n  const [wallet, setWallet] = useState(0); // Общая сумма кошелька (остаток от округления)\n  const [calculation, setCalculation] = useState(null); // Результат расчета\n  const [totalRemaining, setTotalRemaining] = useState(0); // Остаток доступных доходов после покрытия расходов\n  const [history, setHistory] = useState([]); // История операций: теперь массив объектов [{ timestamp: '2023-10-01T12:00:00.000Z', description: '...' }]\n  const [showHistory, setShowHistory] = useState(false); // Флаг для показа/скрытия истории\n\n  // Состояния для формы доходов\n  const [incomeDate, setIncomeDate] = useState('');\n  const [incomeAmount, setIncomeAmount] = useState('');\n\n  // Состояния для формы расходов\n  const [expenseName, setExpenseName] = useState('');\n  const [expenseAmount, setExpenseAmount] = useState('');\n  const [expenseDate, setExpenseDate] = useState(''); // Новое состояние для даты расхода\n\n  // Состояние для использования из кошелька\n  const [useFromWallet, setUseFromWallet] = useState('');\n\n  // Флаг для предотвращения двойной загрузки и преждевременного сохранения\n  const isLoaded = useRef(false);\n\n  // Загрузка данных из localStorage при монтировании компонента (только один раз)\n  useEffect(() => {\n    if (!isLoaded.current) {\n      try {\n        const savedIncomes = localStorage.getItem('incomes');\n        if (savedIncomes) {\n          setIncomes(JSON.parse(savedIncomes));\n        }\n        const savedExpenses = localStorage.getItem('expenses');\n        if (savedExpenses) {\n          setExpenses(JSON.parse(savedExpenses));\n        }\n        const savedSavings = localStorage.getItem('savings');\n        if (savedSavings) {\n          setSavings(parseFloat(savedSavings) || 0);\n        }\n        const savedWallet = localStorage.getItem('wallet');\n        if (savedWallet) {\n          setWallet(parseFloat(savedWallet) || 0);\n        }\n        const savedHistory = localStorage.getItem('history');\n        if (savedHistory) {\n          setHistory(JSON.parse(savedHistory));\n        }\n        isLoaded.current = true; // Устанавливаем флаг после загрузки\n      } catch (error) {\n        // Ошибка загрузки (можно добавить обработку, если нужно)\n      }\n    }\n  }, []);\n\n  // Сохранение incomes в localStorage при изменении (только после загрузки)\n  useEffect(() => {\n    if (isLoaded.current) {\n      try {\n        localStorage.setItem('incomes', JSON.stringify(incomes));\n      } catch (error) {\n        // Ошибка сохранения (можно добавить обработку, если нужно)\n      }\n    }\n  }, [incomes]);\n\n  // Сохранение expenses в localStorage при изменении (только после загрузки)\n  useEffect(() => {\n    if (isLoaded.current) {\n      try {\n        localStorage.setItem('expenses', JSON.stringify(expenses));\n      } catch (error) {\n        // Ошибка сохранения (можно добавить обработку, если нужно)\n      }\n    }\n  }, [expenses]);\n\n  // Сохранение savings в localStorage при изменении (только после загрузки)\n  useEffect(() => {\n    if (isLoaded.current) {\n      try {\n        localStorage.setItem('savings', savings.toString());\n      } catch (error) {\n        // Ошибка сохранения (можно добавить обработку, если нужно)\n      }\n    }\n  }, [savings]);\n\n  // Сохранение wallet в localStorage при изменении (только после загрузки)\n  useEffect(() => {\n    if (isLoaded.current) {\n      try {\n        localStorage.setItem('wallet', wallet.toString());\n      } catch (error) {\n        // Ошибка сохранения (можно добавить обработку, если нужно)\n      }\n    }\n  }, [wallet]);\n\n  // Сохранение history в localStorage при изменении (только после загрузки)\n  useEffect(() => {\n    if (isLoaded.current) {\n      try {\n        localStorage.setItem('history', JSON.stringify(history));\n      } catch (error) {\n        // Ошибка сохранения (можно добавить обработку, если нужно)\n      }\n    }\n  }, [history]);\n\n  // Добавление дохода через форму (с округлением и распределением; фиксированный 10% в заначку)\n  const handleAddIncome = (e) => {\n    e.preventDefault(); // Предотвращаем перезагрузку страницы\n    const amount = parseFloat(incomeAmount);\n    if (incomeDate && !isNaN(amount) && amount > 0) {\n      const rounded = Math.floor(amount / 1000) * 1000; // Округление вниз до 1000\n      const walletAmount = amount - rounded; // Остаток в кошелек\n      const savingsAmount = rounded * 0.1; // Фиксированные 10% в заначку от округлённой суммы\n      const availableAmount = rounded - savingsAmount; // Остальное (90%) доступно для расходов\n      setSavings(prev => prev + savingsAmount);\n      setWallet(prev => prev + walletAmount);\n      setIncomes([...incomes, { date: incomeDate, amount: availableAmount }]);\n      // Добавляем в историю с timestamp\n      setHistory([...history, { timestamp: new Date().toISOString(), description: `Добавлен доход: ${incomeDate}, ${availableAmount.toFixed(2)} руб. (заначка: +${savingsAmount.toFixed(2)}, кошелек: +${walletAmount.toFixed(2)})` }]);\n      setIncomeDate(''); // Сбрасываем инпуты\n      setIncomeAmount('');\n    } else {\n      alert('Пожалуйста, введите корректную дату и сумму дохода.');\n    }\n  };\n\n  // Добавление расхода через форму (теперь с датой)\n  const handleAddExpense = (e) => {\n    e.preventDefault(); // Предотвращаем перезагрузку страницы\n    const amount = parseFloat(expenseAmount);\n    if (expenseName && expenseDate && !isNaN(amount) && amount > 0) {\n      setExpenses([...expenses, { name: expenseName, amount, date: expenseDate }]);\n      // Добавляем в историю с timestamp\n      setHistory([...history, { timestamp: new Date().toISOString(), description: `Добавлен расход: ${expenseName}, ${amount.toFixed(2)} руб., дата: ${expenseDate}` }]);\n      setExpenseName(''); // Сбрасываем инпуты\n      setExpenseAmount('');\n      setExpenseDate('');\n    } else {\n      alert('Пожалуйста, введите корректное название, дату и сумму расхода.');\n    }\n  };\n\n  // Удаление дохода (удаляем только доступную сумму; заначка и кошелек остаются)\n  const handleDeleteIncome = (index) => {\n    const deleted = incomes[index];\n    setIncomes(incomes.filter((_, i) => i !== index));\n    // Добавляем в историю с timestamp\n    setHistory([...history, { timestamp: new Date().toISOString(), description: `Удалён доход: ${deleted.date}, ${deleted.amount.toFixed(2)} руб.` }]);\n  };\n\n  // Удаление расхода\n  const handleDeleteExpense = (index) => {\n    const deleted = expenses[index];\n    setExpenses(expenses.filter((_, i) => i !== index));\n    // Добавляем в историю с timestamp\n    setHistory([...history, { timestamp: new Date().toISOString(), description: `Удалён расход: ${deleted.name}, ${deleted.amount.toFixed(2)} руб., дата: ${deleted.date}` }]);\n  };\n\n  // Сброс заначки\n  const handleResetSavings = () => {\n    const previousSavings = savings;\n    setSavings(0);\n    // Добавляем в историю с timestamp\n    setHistory([...history, { timestamp: new Date().toISOString(), description: `Заначка сброшена: было ${previousSavings.toFixed(2)} руб., теперь 0 руб.` }]);\n  };\n\n  // Сброс кошелька\n  const handleResetWallet = () => {\n    const previousWallet = wallet;\n    setWallet(0);\n    // Добавляем в историю с timestamp\n    setHistory([...history, { timestamp: new Date().toISOString(), description: `Кошелёк сброшен: было ${previousWallet.toFixed(2)} руб., теперь 0 руб.` }]);\n  };\n\n  // Удаление записи из истории\n  const handleDeleteHistory = (index) => {\n    setHistory(history.filter((_, i) => i !== index));\n  };\n\n  // Расчет: распределение расходов по доступным доходам (с возможным использованием кошелька; расходы сортируются по дате)\n  const calculate = () => {\n    const walletAmount = parseFloat(useFromWallet) || 0;\n    if (walletAmount > wallet || walletAmount < 0) {\n      alert('Сумма из кошелька должна быть положительной и не превышать доступное в кошельке.');\n      return;\n    }\n\n    let remainingIncomes = [...incomes].sort((a, b) => new Date(a.date) - new Date(b.date)); // Сортировка по дате\n    // Добавляем сумму из кошелька как дополнительный \"доход\" (без даты, обрабатывается последним)\n    if (walletAmount > 0) {\n      remainingIncomes.push({ date: 'Из кошелька', amount: walletAmount });\n    }\n\n    let remainingExpenses = [...expenses].sort((a, b) => new Date(a.date) - new Date(b.date)); // Сортировка расходов по дате\n    let result = [];\n\n    for (let expense of remainingExpenses) {\n      let expenseCovered = false;\n      for (let income of remainingIncomes) {\n        if (income.amount > 0) {\n          const coverAmount = Math.min(income.amount, expense.amount);\n          result.push(`${expense.name} (${expense.amount}, дата: ${expense.date}) покрыто доходом от ${income.date} на ${coverAmount}`);\n          income.amount -= coverAmount;\n          expense.amount -= coverAmount;\n          if (expense.amount <= 0) {\n            expenseCovered = true;\n            break;\n          }\n        }\n      }\n      if (!expenseCovered && expense.amount > 0) {\n        result.push(`${expense.name} (дата: ${expense.date}) не полностью покрыто (осталось ${expense.amount})`);\n      }\n    }\n\n    // Рассчитываем остаток доступных доходов (исключая использованное из кошелька)\n    const totalRemainingAmount = remainingIncomes\n      .filter(inc => inc.date !== 'Из кошелька') // Исключаем кошелек из остатка\n      .reduce((sum, inc) => sum + inc.amount, 0);\n    setTotalRemaining(totalRemainingAmount);\n\n    setCalculation(result);\n\n    // Вычитаем использованное из кошелька\n    if (walletAmount > 0) {\n      setWallet(prev => prev - walletAmount);\n      setUseFromWallet(''); // Сбрасываем поле после использования\n    }\n\n    // Добавляем в историю с timestamp\n    setHistory([...history, { timestamp: new Date().toISOString(), description: `Выполнен расчёт: использован кошелёк ${walletAmount.toFixed(2)} руб., остаток доходов: ${totalRemainingAmount.toFixed(2)} руб.` }]);\n  };\n\n  return (\n    <div className=\"App\">\n      <h1>Бюджетное приложение</h1>\n\n      <div>\n        <h2>Заначка</h2>\n        <p>Общая сумма: {savings.toFixed(2)} руб.</p>\n        <p>Примечание: Фиксированные 10% от округлённой суммы дохода идут в заначку.</p>\n        <button onClick={handleResetSavings}>Сбросить заначку</button>\n      </div>\n\n      <div>\n        <h2>Кошелек</h2>\n        <p>Общая сумма: {wallet.toFixed(2)} руб.</p>\n        <p>Примечание: Вы можете взять деньги из кошелька для покрытия расходов.</p>\n        <button onClick={handleResetWallet}>Сбросить кошелек</button>\n        {wallet > 0 && (\n          <div>\n            <label>Использовать из кошелька для расходов (руб.):</label>\n            <input\n              type=\"number\"\n              value={useFromWallet}\n              onChange={(e) => setUseFromWallet(e.target.value)}\n              placeholder=\"Сумма\"\n              min=\"0\"\n              step=\"0.01\"\n              max={wallet}\n            />\n          </div>\n        )}\n      </div>\n\n      <div>\n        <h2>Доходы (доступные для расходов)</h2>\n        <form onSubmit={handleAddIncome}>\n          <input\n            type=\"date\"\n            value={incomeDate}\n            onChange={(e) => setIncomeDate(e.target.value)}\n            placeholder=\"Дата дохода\"\n            required\n          />\n          <input\n            type=\"number\"\n            value={incomeAmount}\n            onChange={(e) => setIncomeAmount(e.target.value)}\n            placeholder=\"Сумма дохода\"\n            min=\"0.01\"\n            step=\"0.01\"\n            required\n          />\n          <button type=\"submit\">Добавить доход</button>\n        </form>\n        <p>Примечание: Сумма округляется вниз до ближайших 1000 руб. <br />\n          10% уйдёт в заначку, <br />\n           остаток от округления — в кошелек, <br />остальное (90%) доступно для расходов.</p>\n        <ul>\n          {incomes.map((inc, idx) => (\n            <li key={idx}>\n              {inc.date}: {inc.amount.toFixed(2)} руб. \n              <button onClick={() => handleDeleteIncome(idx)}>Удалить</button>\n            </li>\n          ))}\n        </ul>\n      </div>\n\n      <div>\n        <h2>Расходы</h2>\n        <form onSubmit={handleAddExpense}>\n          <input\n            type=\"text\"\n            value={expenseName}\n            onChange={(e) => setExpenseName(e.target.value)}\n            placeholder=\"Название расхода\"\n            required\n          />\n          <input\n            type=\"date\"\n            value={expenseDate}\n            onChange={(e) => setExpenseDate(e.target.value)}\n            placeholder=\"Дата расхода\"\n            required\n          />\n          <input\n            type=\"number\"\n            value={expenseAmount}\n            onChange={(e) => setExpenseAmount(e.target.value)}\n            placeholder=\"Сумма расхода\"\n            min=\"0.01\"\n            step=\"0.01\"\n            required\n          />\n          <button type=\"submit\">Добавить расход</button>\n        </form>\n        <ul>\n          {expenses.map((exp, idx) => (\n            <li key={idx}>\n              {exp.name} ({exp.date}): {exp.amount} руб. \n              <button onClick={() => handleDeleteExpense(idx)}>Удалить</button>\n            </li>\n          ))}\n        </ul>\n      </div>\n\n      <button onClick={calculate}>Рассчитать</button> {/* Исправил опечатку */}\n\n      {calculation && (\n        <div>\n          <h2>Результат</h2>\n          <ul>\n            {calculation.map((item, idx) => (\n              <li key={idx}>{item}</li>\n            ))}\n          </ul>\n        </div>\n      )}\n\n      {/* Отдельная графа для остатка доходов */}\n      {totalRemaining !== null && (\n        <div>\n          <h2>Остаток</h2>\n          <p>После покрытия расходов: {totalRemaining.toFixed(2)} руб.</p>\n        </div>\n      )}\n\n      {/* Раздел истории */}\n      <div>\n        <h2>История операций</h2>\n        <button onClick={() => setShowHistory(!showHistory)}>\n          {showHistory ? 'Скрыть историю' : 'Показать историю'}\n        </button>\n        {showHistory && (\n          <ul>\n            {history.length > 0 ? (\n              history.map((entry, idx) => (\n                <li key={idx}>\n                  {new Date(entry.timestamp).toLocaleString('ru-RU')} - {entry.description}\n                  <button onClick={() => handleDeleteHistory(idx)}>Удалить</button>\n                </li>\n              ))\n            ) : (\n              <li>История пуста.</li>\n            )}\n          </ul>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}